(()=>{"use strict";const e=window.React,t=window.wp.blocks,r=window.wp.primitives,s=(0,e.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(r.Path,{d:"M14.5 5.5h-7V7h7V5.5ZM7.5 9h7v1.5h-7V9Zm7 3.5h-7V14h7v-1.5Z"}),(0,e.createElement)(r.Path,{d:"M16 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2ZM6 3.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V4a.5.5 0 0 1 .5-.5Z"}),(0,e.createElement)(r.Path,{d:"M20 8v11c0 .69-.31 1-.999 1H6v1.5h13.001c1.52 0 2.499-.982 2.499-2.5V8H20Z"})),o=window.wp.data,i=window.wp.i18n,a=window.wp.compose,n=window.wp.hooks,c=window.Theater.ProductionPosttype.Slug,u=c+"_sub",p={name:"theatrebase/subsites-query",title:(0,i.__)("Production Subsites","theatrebase-production-blocks"),description:(0,i.__)('Shows the subsites of the current production. Used on a production subsite, this block lists all sibling "subsites" under the same parent production.',"theatrebase-production-blocks"),keywords:[(0,i.__)("zusatz","theatrebase-production-blocks"),(0,i.__)("produktion","theatrebase-production-blocks"),(0,i.__)("theater","theatrebase-production-blocks")],icon:s,example:{},attributes:{query:{perPage:16,pages:1,offset:0,postType:u,order:"asc",orderBy:"title",inherit:!1,parents:[]},displayLayout:{type:"flex",columns:4},align:"wide",className:"t7b4-subsites-query",customClassName:!1},innerBlocks:[["core/post-template",{},[["core/cover",{useFeaturedImage:!0,dimRatio:20,overlayColor:"primary",minHeight:200,minHeightUnit:"px",style:{spacing:{padding:{top:"0px"}}}},[["core/post-title",{textAlign:"center",level:3,isLink:!0,style:{typography:{lineHeight:"1"}},fontSize:"large"}]]]]]],scope:["inserter"],isActive:e=>"t7b4-subsites-query"===e.className};(0,t.registerBlockVariation)("core/query",p);const l=(0,a.createHigherOrderComponent)((t=>r=>{if("core/query"!==r.name)return(0,e.createElement)(t,{...r});if(u!==r.attributes.query.postType)return(0,e.createElement)(t,{...r});if(0!==r.attributes.query.parents.length)return(0,e.createElement)(t,{...r});const s=(0,o.select)("core/editor").getCurrentPost();if(c!==s.type&&u!==s.type)return(0,e.createElement)(t,{...r});const i=c===s.type?s.id:s.parent,a=r.attributes.query;return a.parents=[i],r.setAttributes({query:a}),(0,e.createElement)(t,{...r})}),"productionSubsitesQueryEngine");(0,n.addFilter)("editor.BlockListBlock","theatrebase/production-subsites-query-engine",l)})();